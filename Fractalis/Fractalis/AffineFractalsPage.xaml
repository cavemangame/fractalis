<Page x:Class="Fractalis.AffineFractalsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Controls="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit.Extended"
    Title="Алгоритмы ДСИФ и РСИФ"
    Loaded="Window_Loaded"
    ShowsNavigationUI="False" KeepAlive="True">
    <DockPanel LastChildFill="True">
        <StackPanel DockPanel.Dock="Left">
            <Grid Name="ToolsGrid">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" MinWidth="150"/>
                    <ColumnDefinition Width="20" MinWidth="20"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right">
                    Библиотека:
                </Label>
                <TextBlock Name="LibraryName" Grid.Column="1" Grid.Row="0" TextAlignment="Center" VerticalAlignment="Center"
                           Text="{Binding Path=Name}">

                </TextBlock>
                <Button Name="LibraryLoad" Grid.Column="2" Grid.Row="0" Click="LibraryLoad_Click">...</Button>

                <Label Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right">
                    Фрактал:
                </Label>
                <ComboBox Name="FractalSelector"  Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1"
                          ItemsSource="{Binding Path=Fractals}" DisplayMemberPath="Name" MaxWidth="180"
                          IsSynchronizedWithCurrentItem="True" SelectionChanged="FractalSelector_SelectionChanged">
                </ComboBox>

                <Label Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="2" HorizontalAlignment="Center">
                    Функции:
                </Label>

                <TextBox Name="Functions" Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="3" IsEnabled="False" 
                         TextWrapping="Wrap" AcceptsReturn="True" MaxWidth="240"
                         Text="{Binding Path=Fractals/Rules}">
                </TextBox>

                <Label Grid.Column="0" Grid.Row="4" HorizontalAlignment="Right">
                    Итераций:
                </Label>
                <Controls:NumericUpDown  Name="Depth" Grid.Column="1"  Grid.ColumnSpan="2" Grid.Row="4" MaxWidth="180"
                                         Text="{Binding Path=Fractals/Depth}"/>

                <RadioButton Name="DifsAlgo" GroupName="Ifs" Content="DIFS" Grid.Column="0" Grid.Row="5" IsChecked="True" HorizontalAlignment="Center"/>
                <RadioButton Name="RifsAlgo" GroupName="Ifs" Content="RIFS" Grid.Column="0" Grid.Row="6" HorizontalAlignment="Center"/>

                <Label Grid.Column="0" Grid.Row="7" HorizontalAlignment="Right">
                    Цвет:
                </Label>
                <Controls:ColorPicker Name="FractalColorPicker" Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="7"
                                      SelectedColor="{Binding FractalColor, Mode=TwoWay}"
                                      CurrentColor="{Binding FractalColor}" />
            </Grid>
            <StackPanel>
                <Button Margin="50, 5" Click="ButtonFractal_Click">Рисовать</Button>
            </StackPanel>
            <StackPanel>
                <Button Margin="50, 5" Click="ButtonSave_Click">Сохранить</Button>
            </StackPanel>
        </StackPanel>
        <StackPanel DockPanel.Dock="Left" Name="FractalisImagePanel" MinWidth="600" MinHeight="600">
            <Image Name="FractalisImage" HorizontalAlignment="Left" VerticalAlignment="Stretch"></Image>
        </StackPanel>
    </DockPanel>
</Page>
